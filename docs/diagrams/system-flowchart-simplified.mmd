flowchart TD
    Start([START]) --> Phase1[ðŸŸ£ PHASE 1: INITIALIZATION<br/>Load Configuration<br/>Initialize House Market<br/>Initialize Player Profile]
    
    Phase1 --> Phase2[ðŸŸ  PHASE 2: PRE-FLOOD DECISIONS<br/>House Selection<br/>Protection & Furniture<br/>Insurance Purchase]
    
    Phase2 --> Phase3[ðŸ”µ PHASE 3: SIMULATION LOOP]
    
    Phase3 --> TimeUpdate[Update Time & Weather<br/>currentDay += 1]
    TimeUpdate --> FloodCalc[Calculate Flood Probability<br/>P = f rainfall, frequency, threshold]
    
    FloodCalc --> FloodCheck{Flood<br/>Occurs?}
    
    FloodCheck -->|No| Economic[Economic Updates<br/>Property appreciation<br/>Risk perception decay]
    FloodCheck -->|Yes| Damage[Calculate Damage<br/>Apply losses<br/>Insurance payout]
    
    Economic --> SimCheck{Continue<br/>Simulation?}
    Damage --> Phase4[ðŸ”´ PHASE 4: POST-FLOOD RESPONSE<br/>Repair decisions<br/>Risk reassessment<br/>Save results]
    
    Phase4 --> SimCheck
    SimCheck -->|Yes| Phase3
    SimCheck -->|No| End([END])
    
    style Start fill:#2ecc71,stroke:#27ae60,stroke-width:3px,color:#fff
    style End fill:#e74c3c,stroke:#c0392b,stroke-width:3px,color:#fff
    style Phase1 fill:#9b59b6,stroke:#8e44ad,stroke-width:2px,color:#fff
    style Phase2 fill:#f39c12,stroke:#e67e22,stroke-width:2px,color:#fff
    style Phase3 fill:#3498db,stroke:#2980b9,stroke-width:2px,color:#fff
    style Phase4 fill:#e91e63,stroke:#c2185b,stroke-width:2px,color:#fff